// fhicl include file that defines detector geometry
//
// Andrei Gaponenko, 2012

BEGIN_PROLOG

//================================================================
mucapMaterials : {
    TCelsius : 20
    pcGasCF4VolumeFraction : 0.8
    cradleGasN2VolumeFraction : 0.03
    gabsGasCO2VolumeFraction : 0.43
    printElements : false
    printMaterials : false
}

//================================================================
// Ideal geometry
chamberModulesIdeal : [
    {
        type  : pcModule
        zfoil : [ -600, -596, -592, -588, -584]
        zwire : [    -598, -594, -590, -586]
        rotation : [ +45.0, -45.0, +45.0, -45.0 ]
    },
    {
        type  : dcModule // dense stack
        zfoil : [ -500, -496, -492, -488, -484, -480, -476, -472, -468 ]
        zwire : [    -498,  -494, -490, -486, -482, -478, -474, -470 ]
        rotation : [  -45,    45,   -45,  45,  45,   -45,  45,   -45 ]
    },
    {
        type  : dcModule
        zfoil : [ -424, -420, -416 ]
        zwire : [   -422, -418 ]
        rotation : [ +45,  -45 ]
    },
    {
        type  : dcModule
        zfoil : [  -352, -348, -344 ]
        zwire : [    -350, -346 ]
        rotation : [ +45,  -45 ]
    },
    {
        type  : dcModule
        zfoil : [ -300, -296, -292 ]
        zwire : [   -298, -294]
        rotation : [ +45,  -45 ]
    },
    {
        type  : dcModule
        zfoil : [ -228, -224, -220 ]
        zwire : [   -226, -222  ]
        rotation : [ +45,  -45 ]
    },
    {
        type  : dcModule
        zfoil : [ -176, -172, -168 ]
        zwire : [   -174, -170 ]
        rotation : [ +45,  -45 ]
    },
    {
        type  : dcModule
        zfoil : [ -104,  -100,  -96 ]
        zwire : [   -102, -98 ]
        rotation : [ +45,  -45 ]
    },
    {
        type  : dcModule
        zfoil : [ -52, -48, -44 ]
        zwire : [   -50, -46 ]
        rotation : [ +45,  -45 ]
    },
    {
        type  : targetModule
        zfoil : [ -8, -4, 0, 4, 8 ]
        zwire : [   -6, -2, 2, 6 ]
        rotation : [ +135.0, -135.0, +135.0, -135.0 ]
    },
    {
        type  : dcModule
        zfoil : [ 44, 48, 52 ]
        zwire : [   46, 50 ]
        rotation : [ 135, -135 ]
    },
    {
        type  : dcModule
        zfoil : [ 96, 100, 104 ]
        zwire : [    98, 102 ]
        rotation : [ 135, -135 ]
    },
    {
        type  : dcModule
        zfoil : [ 168, 172, 176 ]
        zwire : [   170, 174 ]
        rotation : [135, -135 ]
    },
    {
        type  : dcModule
        zfoil : [220, 224, 228]
        zwire : [ 222, 226 ]
        rotation : [ 135, -135 ]
    },
    {
        type  : dcModule
        zfoil : [292, 296, 300 ]
        zwire : [  294, 298]
        rotation : [135, -135]
    },
    {
        type  : dcModule
        zfoil : [ 344, 348, 352]
        zwire : [   346, 350]
        rotation : [135, -135]
    },
    {
        type  : dcModule
        zfoil : [ 416, 420, 424 ]
        zwire : [   418, 422]
        rotation : [135, -135]
    },
    {
        type  : dcModule
        zfoil : [ 468, 472, 476, 480, 484, 488, 492, 496, 500 ]
        zwire : [   470, 474, 478, 482, 485, 490, 494, 498]
        rotation : [135, -135, 135, -135, -135, 135, -135, 135]
    },
    {
        type  : pcModule
        zfoil : [ 584,  588,  592,  596, 600 ]
        zwire : [    586,  590,  594, 598 ]
        rotation : [ +135.0, -135.0, +135.0, -135.0 ]
    }
]

//================================================================
// numbers from dt_geo.00061, converted to mm
chamberModules00061 : [
    {
        type  : pcModule
        zfoil : [ -599.7760, -595.7759, -591.7769, -587.7779, -583.7782 ]
        zwire : [ -597.9256, -593.9262, -589.9275, -585.9282 ]
        rotation : [ +45.0, -45.0, +45.0, -45.0 ]
    },
    {
        type  : dcModule // dense stack
        zfoil : [ -499.792, -495.792, -491.791, -487.790, -483.789, -479.789, -475.788, -471.787, -467.787 ]
        zwire : [ -497.942, -493.941, -489.940, -485.940, -481.939, -477.938, -473.937, -469.937 ]
        rotation : [  -45,    45,   -45,  45,  45,   -45,  45,   -45 ]
    },
    {
        type  : dcModule
        zfoil : [ -423.788, -419.788, -415.789 ]
        zwire : [ -421.938, -417.939 ]
        rotation : [ +45,  -45 ]
    },
    {
        type  : dcModule
        zfoil : [ -371.790, -367.791, -363.791]
        zwire : [    -369.940, -365.941 ]
        rotation : [ +45,  -45 ]
    },
    {
        type  : dcModule
        zfoil : [ -299.808, -295.809, -291.809 ]
        zwire : [     -297.958, -293.959 ]
        rotation : [ +45,  -45 ]
    },
    {
        type  : dcModule
        zfoil : [ -227.827, -223.828, -219.829 ]
        zwire : [   -225.977,  -221.978  ]
        rotation : [ +45,  -45 ]
    },
    {
        type  : dcModule
        zfoil : [ -155.848, -151.848, -147.849 ]
        zwire : [    -153.998,  -149.998 ]
        rotation : [ +45,  -45 ]
    },
    {
        type  : dcModule
        zfoil : [ -103.854,  -99.855, -95.856 ]
        zwire : [    -102.004,  -98.005 ]
        rotation : [ +45,  -45 ]
    },
    {
        type  : dcModule
        zfoil : [ -51.862,  -47.862,  -43.863 ]
        zwire : [   -50.012,  -46.013 ]
        rotation : [ +45,  -45 ]
    },
    {
        type  : targetModule
        zfoil : [ -8.1318,  -4.1318,
                  // The value in dt_geo.00061: -0.0904,
                  // however this is the 25um foil position, and
                  // 71um target is glued on the "-z" side
                  // (in G3's PC6 volume).
                  // -0.0904 - 0.0250/2 - 0.071/2 = -0.1384
                  -0.1384,
                  3.8671,   7.8677 ]

        zwire : [ -5.9817, -1.9816, 2.0167, 6.0172 ]
        rotation : [ +135.0, -135.0, +135.0, -135.0 ]
    },
    {
        type  : dcModule
        zfoil : [ 43.866,   47.866,   51.865]
        zwire : [   46.016, 50.015 ]
        rotation : [ 135, -135 ]
    },
    {
        type  : dcModule
        zfoil : [ 95.862,   99.861,  103.860]
        zwire : [   98.012,  102.011 ]
        rotation : [ 135, -135 ]
    },
    {
        type  : dcModule
        zfoil : [ 147.844,  151.844,  155.843 ]
        zwire : [   149.994, 153.994 ]
        rotation : [135, -135 ]
    },
    {
        type  : dcModule
        zfoil : [ 219.828,  223.827,  227.826 ]
        zwire : [  221.978,  225.977 ]
        rotation : [ 135, -135 ]
    },
    {
        type  : dcModule
        zfoil : [ 291.810,  295.809,  299.809 ]
        zwire : [  293.960,  297.959 ]
        rotation : [135, -135]
    },
    {
        type  : dcModule
        zfoil : [ 363.794,  367.794,  371.794 ]
        zwire : [   365.944,  369.944 ]
        rotation : [135, -135]
    },
    {
        type  : dcModule
        zfoil : [ 415.792,  419.792,  423.791 ]
        zwire : [    417.942,  421.941 ]
        rotation : [135, -135]
    },
    {
        type  : dcModule
        zfoil : [ 467.791,  471.790,  475.790, 479.790,  483.789,  487.789,  491.789,  495.789,  499.788 ]
        zwire : [     469.941, 473.940, 477.940, 481.939, 485.939, 489.939, 493.939, 497.939 ]
        rotation : [135, -135, 135, -135, -135, 135, -135, 135]
    },
    {
        type  : pcModule
        zfoil : [ 583.7595,  587.7595,  591.7596,  595.7596,  599.7596 ]
        zwire : [ 585.9095, 589.9096, 593.9096, 597.9096 ]
        rotation : [ +135.0, -135.0, +135.0, -135.0 ]
    }
]

//================================================================
mucapGeometry : {
    forceAuxEdgeVisible : true
    doSurfaceCheck : false
    writeGDML : false

    world : {
        halfLength : [ 4500, 4500, 4500] // as in TWIST G3
        material : "MUCAP_CRADLE_GAS" // FIXME: should be "G4_AIR", need to implement HEBAG
        BFieldInTesla : 2.0
        maxG4StepLength : 1 // mm, for visualization
        visible : false
        solid   : false
    }

    // Detector He enclosure. Follow G3's extra_geom.par, convert cm to mm
    hous : {
        hous_radius: 514.8834
	hous_length: 1495.2980
	hous_cover: 76.2
	hous_mantle: 2.3876
	hous_wall_visible: true
	hous_wall_solid: false

        hous_material : "MUCAP_CRADLE_GAS"
	hous_visible: false
	hous_solid: false

	hent_radius_1: 170.053
	hent_radius_2: 195.453
	hent_length_1: 28.197175
	hent_length_2:  48.002825
	hent_flunsh: 6.35

        visible : false
        solid   : false
    }

    cellSD : {
        hitsSizeLimit : 0 // zero for unlimited
    }

    cathode : {
        radius : 169 // mm
        thickness : 0.005960 // mm
        material : "G4_MYLAR"
        visible : false
        solid : false
    }

    cathodeSupport : {
        thickness     : 3.2 // mm
        material : "MUCAP_FR4"
        visible : true
        solid : false
    }

    glassFrame : {
        rmin : 196
        rmax : 300
        thickness : 3.18 // detector paper
        material : "G4_Pyrex_Glass"
        visible : true
        solid : false
    }

    pcModule : {
        material : "MUCAP_PC_GAS"
        nwires : 160
        wireSpacing : 2 // mm
        wire : {
            material : "G4_W"
            diameter : 0.015 // 15 um
            visible : false
            solid : true
        }
        moduleBoxVisible : false
        moduleBoxSolid : false
        driftCellVisible : true
        driftCellSolid : false
    }
    targetModule : {
        material : "MUCAP_PC_GAS"
        nwires : 48
        wireNumberOffset : 56
        wireSpacing : 2 // mm
        wire : {
            material : "G4_W"
            diameter : 0.015 // 15 um
            visible : false
            solid : true
        }
        target : {
            radius : 169 // mm
            thickness : 0.071 // 71 um
            material : "G4_Al"
            visible : true
            solid : true
        }
        moduleBoxVisible : false
        moduleBoxSolid : false
        driftCellVisible : true
        driftCellSolid : false
    }
    dcModule : {
        material : "MUCAP_DME"
        nwires : 80
        wireSpacing : 4 // mm
        wire : {
            material : "G4_W"
            diameter : 0.015 // 15 um
            visible : false
            solid : true
        }
        moduleBoxVisible : false
        moduleBoxSolid : false
        driftCellVisible : true
        driftCellSolid : false
    }

    chamberModules : @local::chamberModules00061

} // end of geometry

//================================================================

END_PROLOG

// This tells emacs to view this file in the JavaScript mode.
// Local Variables:
// mode:js
// End:
